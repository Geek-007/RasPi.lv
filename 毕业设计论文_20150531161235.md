# 基于Raspberry Pi的可微信控制的空气质量监控系统

`pandoc -o output.docx -f markdown -t docx markdown-file.md`

# 摘要

> （最后再写）

# Abstract

> （英文翻译）

# 目录

> （最后自动生成）  

# 第一章 绪论

## 1.1 研究概括

### 1.1.1 项目背景  

>（空气状况与互联网+）人体健康 -> 国内空气环境/室内居家健康环境

在全球变暖和国内工业高速发展的背景下，伴随着人口增长和城镇化的进展，国内空气环境的质量可谓日况愈下。特别是京津冀地区，我国大气污染最严重的区域之一，雾霾状况频发且愈发严重。人类生活离不开空气，空气质量与人体健康的关系密切相关，在政府机构和绿色环保组织的积极宣传和倡导下，公众对国内空气状况的了解和重视程度也越来越深。因此，空气环境状况成为了人民生活的又一热门话题，如何改善空气质量是目前来说最为迫切的环境问题。

随着空气状况的日渐恶化，对空气质量的监控也就变得无比重要，对不同地区的空气进行质量监控，可以为日后的空气状况研究提供数据支持，以便于研究人员能够针对空气质量尽快提出有效的解决方案。而对于个人来说，对家庭居住和出行的周边环境中空气质量的了解和认识也非常重要，这为保护家庭成员的身体健康提供了数据前提和出行保障。而在另一方面，实时掌握家里的环境状态以及家庭险情的自动报警等功能，能够保护全家人的身体健康与财产安全。

### 1.1.2 项目目的

> 创新实践

本项目就是基于日前的国内空气状况所提出的个人解决方案，旨在设计和研究一种可移动性的、快速搭建的、便捷的低成本空气监控设备。在空气监控设备这方面的尝试在国内也尚为少见，据笔者了了解，只有少部分的创业公司想抓住时代的机遇，正尝试于推出空气监控相关的产品。国内热门的互联网手机厂商也在近期推出了小米空气净化器，针对国内的空气污染问题，以满足于消费者所热切需要的室内空气净化功能。

本项目属于创新实践应用，基于国外比较热门的开源硬件Raspberry Pi（中文名：树莓派）进行相关空气传感器和互联网接入等相关扩展，从而有了一套从硬件到软件，线下到线上的物联网解决方案。在软件方面，也从空气传感器数据收集和处理到服务器的搭建、网络应用的开发等方面进行了软件开发研究和实践，完成了一个软硬件结合的综合性应用项目。

### 1.1.3 项目意义

> 低成本的家居解决方案、项目特点（微信）

在本项目中，整套监控系统将围绕着树莓派进行传感器和网络等相关扩展，其重点在于提出一种低成本的家居解决方案。这套解决方案首先可以对室内空气状况进行检测和实现对设备的相关控制，而作为应用创新实践项目，也旨在研究影响空气质量状况的空气因素和相关评定标准和实际项目设计与实践。除此之外，树莓派的扩展能力也远不止于此，还可以将树莓派直接作为网关实现网络服务器的搭建，从而使整套监控系统能够接入互联网，使用户能够直接远程查看该设备所检测到的空气状况和其本身的工作状态，进而操控设备能够在不同的空气状况下做出不同的反应。

并且在此次毕业设计中，笔者还将采用微信作为整套系统的控制终端，借助于微信公众账号打通用户和监控系统的交互路径，能够从微信中直接查看室内空气状况或者跳转到网页获得如数据图表等更为细致的信息。与此同时，探究了移动端产品设计和用户体验等方面人文心理类知识，将之运用到具体的产品开发中也让笔者对全面运用知识的能力得到很大的提升。

## 1.2 发展现状

### 1.2.1 智能家居

> 硬件创业，生活品质，可穿戴

在经历计算机和互联网、移动互联网的兴起之后，物联网被称为信息时代的又一次信息产业技术性革命。随着物联网技术的发展，智能家居应用也将被推向新的发展高度，将智能家居相关设备与互联网连接，可以实现更加丰富的应用模式和场景。近几年物联网设备和应用都如雨后春笋一般层出不穷，国内外都在进行着非常踊跃的尝试与实践，一切的电子设备都开始拥有数据收集和处理能力，将相关数据加以利用可以对人们的生活习惯和生活环境有很大的改善作用。而智能家居作为最贴近于人们的生活起居的一个维度，也是最能够对人们生活产生最大影响的一个环境变量。从而对智能家居中空气环境状况的研究和针对于空气所做的智能监控设备，都是非常有意义和具有前景的方向。

### 1.2.2 互联网+

> 国家政策

在今年3月份，中国政府在工作报告首次提出“互联网+”的行动计划，推动移动互联网、云计算、大数据、物联网等与现代制造业结合，促进电子商务、工业互联网和互联网金融健康发展，引导互联网企业拓展国际市场。目前国家已设立400亿元新兴产业创业投资引导基金，要整合筹措更多资金，为产业创新加油助力。简单地说，“互联网+”就是以互联网平台为基础，利用信息通信技术与各行业进行跨界融合。国务院总理李克强还称，“在互联网+的风口上顺势而为，会使中国经济飞起来。”

在这样的背景之下，互联网对国民的生活甚至于国家经济都已经产生了巨大的影响，国家政府也正式在政策上提出利用互联网拉动经济水平的行动计划。由此可见，智能家居等相关物联网产业必将在新的信息产业发展中前景良好，物联网作为互联网中新兴的一种延展形式，也将会拉动经济水平的进步和国民生活的改善。

### 1.2.3 移动浪潮

> 移动设备剧增、可移动性，便携性

所谓移动互联网，就是将移动通信和互联网二者结合起来，成为一体。随着互联网技术的迅速发展，互联网服务早已延伸到人们的生活日常之中，移动互联网尤甚，可以说很多人在一天的生活中是离不开智能手机的。在移动互联网时代，首先需要考虑的就是，对用户来说，移动设备具有更加易用的可操作性和便捷性，用户也会更加习惯于使用手机等移动设备来接入互联网服务，而另一方面就是基于更多的用户需求，进而可以连接更多的产业领域，将更多的设备接入互联网就可以创造出更多的商业价值。

而在此项目中，笔者也将顺应信息时代的移动浪潮，将监控设备的可控制场景不局限于家庭室内，而是将其接入互联网服务。借助于微信公众账号当下这一热门领域，尽量将用户和产品的距离拉到最近，使之能够使用最便捷的方式来操作和查看整个监控系统。

## 1.3 研究内容

### 1.3.1 主要模块简介

> 硬件软件结合讲，从功能出发

本论文主要研究空气质量监控系统对空气中气体物质含量的实时监控。包括以下内容：

1. 空气传感器的研究与选定：传感器对整套空气质量监控系统的作用就像人的鼻子一样，灵敏度和稳定性是非常重要的。根据国家室内空气质量标准--GB/T18883-2002文件中所定义的对可能影响人体健康以及舒适程度的环境参数，以及结合相关传感器的硬件成本考虑，目前决定采集监控的气体物质包括一氧化碳、烟雾、粉尘和液化气，需要选定不同的传感器对不同的物质进行检测。

2. 树莓派电路板的使用与扩展：树莓派是整套系统的核心硬件，首先是作为控制中心，需要分别控制不同的传感器模块检测空气质量的相关数据，进而对采集到的数据进行具有实际意义的处理分析。再者，树莓派作为软件服务器对整套系统提供运行环境，同时还要处理微信公众号服务器与该系统的数据收发，以及搭建Web应用与网页进行功能性的交互。

3. Linux系统的安装与使用：树莓派可以搭载开源系统Linux，从而对于Linux的学习和使用就必不可少。如何利用Linux系统进行快速高效的开发是本部分内容的关键，主要包括两个方面：服务器的搭建和Web程序的部署和运行，前者将采用标准的WSGI接口来进行设计，后者将采用较为流行的相关技术框架来简化开发流程。

4. 服务器的环境搭建：整套系统的运行环境搭载在基于树莓派的Linux系统中，服务器开发语言为C和Python混合编程，并且会运用HTML+CSS+JavaScript进行相关的Web页面开发，本部分内容就是对服务器的设计与实现，从而将整套系统的代码部署在该服务器上来与外部通信。

5. Web应用开发与实现：我们的Web应用服务器直接运行于搭载在树莓派的Linux系统中，用户通过微信公众账号与服务器间接进行功能交互，此部分需要处理微信公众号服务器与本地服务器上所搭载的Web应用所进行的交互，还需要进行开发的开发就是用户在微信中所跳转到的网页功能，该部分的应用功能将利用yeelink平台进行开发实现。

### 1.3.2 章节安排

> 论文的编写安排

在本毕业设计论文中，将主要分为五个章节进行编写，第一部分就是绪论章节，该部分主要介绍本项目的研究概括，包括项目的背景、目的和意义，然后针对国内外的相关产业发展现状进行了分析，主要介绍了物联网背景下的智能家居，政府所提出的“互联网+”政策行动计划，以及在移动浪潮的影响之下本项目的设计趋向，最后对整套监控系统的主要模块进行了简要介绍。第二部分将详细介绍监控系统的总体设计，主要是从应用场景和用户需求出发，注重于系统的的使用产品和相应的功能分析，在完成需求分析之后给出系统的具体实现思路和开发流程，在主控制中心和功能模块化的思想指导下，选择相应的传感器和硬件平台，从而在此基础之上开发软件应用。在第三章中，本论文将详细介绍整套系统的硬件架构，从介绍主控制中心即树莓派开始，分模块解释了传感器硬件的相关设计原理，进而介绍硬件的连接电路和每个模块的作用。主要包括树莓派的GPIO和串口与其他模块的数据传输，以及模数转换模块模拟信号转换为数字信号。第四部分会详细描述监控的本地软件设计，此部分主要关注于在树莓派上对传感器数据的采集和处理，包括操作系统的安装和使用，以及主控制流程的设计与实现，并且在空气数据采集之后进行对数据的实意化处理和有效数据的存储。而后进入最后一部分即第五章，将会详细论述整套系统如何接入互联网，并且与微信公众号和yeelink两个平台进行功能交互，其中包括如何搭建一个WSGI风格的服务器，并将服务器所接入的两个平台上的功能设计和开发都进行了详细介绍。

# 第二章 监控系统的总体设计

## 2.1 系统应用场景与功能分析

### 2.1.1 应用场景

> 假设场景（起火、雾霾）

### 2.1.2 用户需求

> 用户可操控与可查看

## 2.2 系统设计思路

### 2.2.1 主控制中心

> 树莓派的功能介绍：包含硬件上的输入输出/软件上的数据传送与处理，连接互联网

### 2.2.2 功能模块化

> 硬件分离GPIO，WiFi连接Internet，软件功能分离

### 2.2.3 传感器的选用

> 根据国家室内空气质量标准，紧跟用户需求
> 
> 环境信息采集，

## 2.3 系统开发流程

### 2.2.1 硬件平台

> 树莓派与传感器，模数转换，网络连接，显示器，网线等等的连接
> 
> 讲到要做的硬件工作，线路图等等

### 2.2.2 软件开发

> 操作系统的“移植”、服务器搭建、微信连接

# 第三章 监控系统的硬件架构

## 3.1 控制中心硬件设计

### 3.1.1 硬件平台的选择

> 开源硬件的现状，比较各种板子的不同，国内国外，教育目的，个人意义

### 3.1.2 树莓派硬件介绍

> 各个集成模块，亮出内部结构图和电路图

## 3.2 采集模块硬件设计

> 每个模块都要讲内部电路和原理，如何使用，空气数据的采集

### 3.2.1 温湿度

### 3.2.2 MQ系列（一氧化碳，液化气）

### 3.2.3 粉尘PM2.5

## 3.3 硬件的连接

> 都是集成的模块，直接杜邦线连接即可使用，但是要讲原理

### 3.3.1 树莓派的GPIO

> 亮出树莓派的各种IO口以及其方面之处

### 3.3.2 串口与URT2

> 数据口的工作原理，时序啥的

### 3.3.3 传感器信号传输

> 亮出电路图（比较Q型）

## 3.4 数模转换模块

### 3.4.1 数字信号与模拟信号

> 举例子讲粉尘传感器的输出信号和树莓派能够读取的信号

### 3.4.2 模数转换模块

> 如何与树莓派连接，以及中间的转换工作

# 第四章 监控系统的本地软件设计

## 4.1 操作系统的安装与使用

### 4.1.1 Linux内核简介

> Linux的起源与发展，以及其不同的发行版，参考（一步步搭建物联网）

### 4.1.2 安装Raspbian系统

> 介绍如何为树莓派安装操作系统

### 4.1.3 操作系统的配置与使用

> 就讲如何配置好树莓派的各种参数（显示器、时区、语言什么的）
> 
> 还有开机启动什么的，Bash命令行

（在考虑要不要写非产品相关技术）

> Windows和Mac下的必备软件
> 
> 远程桌面
> 
> SSH原理什么的

## 4.2 控制中心主程序设计

### 4.2.1 整体程序框图

> 此处注重描述本机细节，网页应用直接是一个后续整体

### 4.2.2 模块控制程序

> 反正就是将如何读取数据和发送控制信号

### 4.2.3 空气状况判定

### 4.2.4 数据库存储

> 模块化设计思想，后续的网络应用直接读取数据库

## 4.3 传感器数据读取

> 主要讲的是如何读取数据，比如CPU温度数据
> 
> 或者是读取电压值，之后才是有效数据转化

### 4.3.1 采集模块程序

> GPIO口的操作

### 4.3.2 模数转换程序

## 4.4 空气质量数据处理

> 与前者不同的是侧重于获取数据之后的处理，比如

### 4.4.1 粉尘密度算法

### 4.4.2 浓度与电压的关系

# 第五章 接入互联网：网络应用开发

## 5.1 服务器搭建

> 树莓派的网络连接，给出整体流程图框架

### 5.1.1 HTTP协议

### 5.1.2 内网穿透

> 为什么？原理

HTTP -> TCP -> IP

### 5.1.3 开发框架flask

## 5.2 微信公众号开发

### 5.2.1 微信公众号简介

### 5.2.2 查询功能的实现

> 菜单栏设计，直接返回数据或者跳转网页

### 5.2.3 开发框架werobot

## 5.3 数据展示平台

### 5.3.1 yeelink平台简介

> 实现原理，对比国内外产品框架

### 5.3.2 传感器数据展示

> 图形页面展示

## 5.4 智能报警功能

### 5.4.1 空气状况分类

### 5.4.2 报警提示功能开发

> 由于微信公众号的API限制，最后还是做成发Email和微博

# 总结与展望

> 传感器分离，短距离通讯

# 致谢

# 参考文献

# 附录



